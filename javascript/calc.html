<!DOCTYPE html>
<html>
<head>
  <style>
body {
  width: 300px;
  margin: auto;
  text-align: center;
}

table {
  margin: auto;
}

td {
  border-style: solid;
  border-size: 1px;
  width: 30px;
  height: 30px;
  text-align: center;
}
</style>
</head>
<body>

<h2>CALCULATOR</h2>

<h3 id="display">___</h3>

<table>
  <tr>
    <td id="t1" onclick="get('1')">1</td>
    <td id="t2" onclick="get('2')">2</td>
    <td id="t3" onclick="get('3')">3</td>
    <td onclick="get('+')">+</td>
  </tr>
  <tr>
    <td id="t4" onclick="get('4')">4</td>
    <td id="t5" onclick="get('5')">5</td>
    <td id="t6" onclick="get('6')">6</td>
    <td onclick="get('-')">-</td>
  </tr>
  <tr>
    <td id="t7" onclick="get('7')">7</td>
    <td id="t8" onclick="get('8')">8</td>
    <td id="t9" onclick="get('9')">9</td>
    <td onclick="get('*')">x</td>
  </tr>
  <tr>
    <td id="tAC" onclick="get('AC')">AC</td>
    <td id="t0" onclick="get('0')">0</td>
    <td id="tComma" onclick="get(',')">,</td>
    <td onclick="get('/')">/</td>
  </tr>
  <tr>
    <td colspan="4" onclick="get('=')">=</td>
  </tr>
</table>


<script>
var first;
var second;
var op = '';
var waiting = false;

var appoggio = "";
let risultato = 0;
let display = document.getElementById("display");
let stringa = "";

function get(valore) {
  console.log(waiting);
  if (valore != 'AC' && valore != '='){
  	console.log("outer if");
  	
  	if(appoggio.length == 0 && valore == '-'){
  		appoggio = appoggio + valore;
  	}else if(valore == ','){
  		appoggio = appoggio + '.';
  	}else if(isNaN(valore) && waiting == false){
  		first = Number(appoggio);
  		appoggio = '';
  		op = valore;
  		console.log("inner if");
  		waiting = true;
  	}else{
  		appoggio = appoggio + valore;
  		console.log("inner else");
  	}
  	
  	stringa = stringa + valore;
 	display.innerHTML = stringa;
  }else if(valore == '='){
  	console.log("outer else");
  	second = Number(appoggio);
  	value();
  	waiting = false;
  	appoggio = '';
  	display.innerHTML = stringa;
  	stringa = '';
  	first = null;
  	second = null;
  }else{
  	console.log("ultima spiaggia");
  	stringa = '___';
  	display.innerHTML = stringa;
  }
  console.log(stringa);
}


function value(){
	switch(op){
    	case "-": risultato = first - second;
    			  break;
    	case "+": risultato = first + second;
    			  break;
    	case "*": risultato = first * second;
    			  break;
    	case "/": risultato = first / second;
              	  break;
  }
  	stringa = risultato.toString();
}

/*function getEl(element) {
  console.log(element.innerHTML);
  element.style.color = "red";
  element.style.color = "black";
}*/
</script>

</body>
</html>